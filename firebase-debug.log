[debug] [2021-04-19T08:51:44.738Z] ----------------------------------------------------------------------
[debug] [2021-04-19T08:51:44.740Z] Command:       /Users/tatsuki/.nodenv/versions/14.16.0/bin/node /Users/tatsuki/.nodenv/versions/14.16.0/bin/firebase deploy --only functions:nextAppWeb
[debug] [2021-04-19T08:51:44.740Z] CLI Version:   9.10.0
[debug] [2021-04-19T08:51:44.740Z] Platform:      darwin
[debug] [2021-04-19T08:51:44.740Z] Node Version:  v14.16.0
[debug] [2021-04-19T08:51:44.745Z] Time:          Mon Apr 19 2021 17:51:44 GMT+0900 (日本標準時)
[debug] [2021-04-19T08:51:44.745Z] ----------------------------------------------------------------------
[debug] 
[debug] [2021-04-19T08:51:44.753Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2021-04-19T08:51:44.753Z] > authorizing via signed-in user (asahiandraimu@gmail.com)
[debug] [2021-04-19T08:51:44.753Z] [iam] checking project subbme-dev for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2021-04-19T08:51:44.755Z] >>> HTTP REQUEST POST https://cloudresourcemanager.googleapis.com/v1/projects/subbme-dev:testIamPermissions  
 {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2021-04-19T08:51:45.442Z] <<< HTTP RESPONSE 200 {"content-type":"application/json; charset=UTF-8","vary":"X-Origin, Referer, Origin,Accept-Encoding","date":"Mon, 19 Apr 2021 08:51:45 GMT","server":"ESF","cache-control":"private","x-xss-protection":"0","x-frame-options":"SAMEORIGIN","x-content-type-options":"nosniff","server-timing":"gfet4t7; dur=576","alt-svc":"h3-29=\":443\"; ma=2592000,h3-T051=\":443\"; ma=2592000,h3-Q050=\":443\"; ma=2592000,h3-Q046=\":443\"; ma=2592000,h3-Q043=\":443\"; ma=2592000,quic=\":443\"; ma=2592000; v=\"46,43\"","accept-ranges":"none","transfer-encoding":"chunked"}
[debug] [2021-04-19T08:51:45.444Z] >>> HTTP REQUEST POST https://iam.googleapis.com/v1/projects/subbme-dev/serviceAccounts/subbme-dev@appspot.gserviceaccount.com:testIamPermissions  
 {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2021-04-19T08:51:46.149Z] <<< HTTP RESPONSE 200 {"content-type":"application/json; charset=UTF-8","vary":"X-Origin, Referer, Origin,Accept-Encoding","date":"Mon, 19 Apr 2021 08:51:46 GMT","server":"ESF","cache-control":"private","x-xss-protection":"0","x-frame-options":"SAMEORIGIN","x-content-type-options":"nosniff","alt-svc":"h3-29=\":443\"; ma=2592000,h3-T051=\":443\"; ma=2592000,h3-Q050=\":443\"; ma=2592000,h3-Q046=\":443\"; ma=2592000,h3-Q043=\":443\"; ma=2592000,quic=\":443\"; ma=2592000; v=\"46,43\"","accept-ranges":"none","transfer-encoding":"chunked"}
[info] 
[info] === Deploying to 'subbme-dev'...
[info] 
[info] i  deploying functions 
[info] Running command: npm --prefix "$RESOURCE_DIR" run lint
[info] Running command: npm --prefix "$RESOURCE_DIR" run build
[info] ✔  functions: Finished running predeploy script. 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[debug] [2021-04-19T08:51:57.415Z] >>> HTTP REQUEST GET https://serviceusage.googleapis.com/v1/projects/subbme-dev/services/cloudfunctions.googleapis.com  
 
[debug] [2021-04-19T08:51:57.415Z] >>> HTTP REQUEST GET https://serviceusage.googleapis.com/v1/projects/subbme-dev/services/runtimeconfig.googleapis.com  
 
[debug] [2021-04-19T08:51:57.416Z] >>> HTTP REQUEST GET https://serviceusage.googleapis.com/v1/projects/subbme-dev/services/cloudbuild.googleapis.com  
 
[debug] [2021-04-19T08:51:58.359Z] <<< HTTP RESPONSE 200 {"content-type":"application/json; charset=UTF-8","vary":"X-Origin, Referer, Origin,Accept-Encoding","date":"Mon, 19 Apr 2021 08:51:58 GMT","server":"ESF","cache-control":"private","x-xss-protection":"0","x-frame-options":"SAMEORIGIN","x-content-type-options":"nosniff","alt-svc":"h3-29=\":443\"; ma=2592000,h3-T051=\":443\"; ma=2592000,h3-Q050=\":443\"; ma=2592000,h3-Q046=\":443\"; ma=2592000,h3-Q043=\":443\"; ma=2592000,quic=\":443\"; ma=2592000; v=\"46,43\"","accept-ranges":"none","transfer-encoding":"chunked"}
[info] ✔  functions: required API cloudbuild.googleapis.com is enabled 
[debug] [2021-04-19T08:51:58.361Z] <<< HTTP RESPONSE 200 {"content-type":"application/json; charset=UTF-8","vary":"X-Origin, Referer, Origin,Accept-Encoding","date":"Mon, 19 Apr 2021 08:51:58 GMT","server":"ESF","cache-control":"private","x-xss-protection":"0","x-frame-options":"SAMEORIGIN","x-content-type-options":"nosniff","alt-svc":"h3-29=\":443\"; ma=2592000,h3-T051=\":443\"; ma=2592000,h3-Q050=\":443\"; ma=2592000,h3-Q046=\":443\"; ma=2592000,h3-Q043=\":443\"; ma=2592000,quic=\":443\"; ma=2592000; v=\"46,43\"","accept-ranges":"none","transfer-encoding":"chunked"}
[info] ✔  functions: required API cloudfunctions.googleapis.com is enabled 
[debug] [2021-04-19T08:51:58.397Z] <<< HTTP RESPONSE 200 {"content-type":"application/json; charset=UTF-8","vary":"X-Origin, Referer, Origin,Accept-Encoding","date":"Mon, 19 Apr 2021 08:51:58 GMT","server":"ESF","cache-control":"private","x-xss-protection":"0","x-frame-options":"SAMEORIGIN","x-content-type-options":"nosniff","alt-svc":"h3-29=\":443\"; ma=2592000,h3-T051=\":443\"; ma=2592000,h3-Q050=\":443\"; ma=2592000,h3-Q046=\":443\"; ma=2592000,h3-Q043=\":443\"; ma=2592000,quic=\":443\"; ma=2592000; v=\"46,43\"","accept-ranges":"none","transfer-encoding":"chunked"}
[debug] [2021-04-19T08:51:58.397Z] >>> HTTP REQUEST GET https://firebase.googleapis.com/v1beta1/projects/subbme-dev/adminSdkConfig  
 
[debug] [2021-04-19T08:51:59.289Z] <<< HTTP RESPONSE 200 {"content-type":"application/json; charset=UTF-8","vary":"X-Origin, Referer, Origin,Accept-Encoding","date":"Mon, 19 Apr 2021 08:51:59 GMT","server":"ESF","cache-control":"private","x-xss-protection":"0","x-frame-options":"SAMEORIGIN","x-content-type-options":"nosniff","alt-svc":"h3-29=\":443\"; ma=2592000,h3-T051=\":443\"; ma=2592000,h3-Q050=\":443\"; ma=2592000,h3-Q046=\":443\"; ma=2592000,h3-Q043=\":443\"; ma=2592000,quic=\":443\"; ma=2592000; v=\"46,43\"","accept-ranges":"none","transfer-encoding":"chunked"}
[info] i  functions: preparing functions directory for uploading... 
[debug] [2021-04-19T08:51:59.292Z] >>> HTTP REQUEST GET https://runtimeconfig.googleapis.com/v1beta1/projects/subbme-dev/configs  
 
[debug] [2021-04-19T08:51:59.604Z] <<< HTTP RESPONSE 200 {"content-type":"application/json; charset=UTF-8","vary":"X-Origin, Referer, Origin,Accept-Encoding","date":"Mon, 19 Apr 2021 08:51:59 GMT","server":"ESF","cache-control":"private","x-xss-protection":"0","x-frame-options":"SAMEORIGIN","x-content-type-options":"nosniff","alt-svc":"h3-29=\":443\"; ma=2592000,h3-T051=\":443\"; ma=2592000,h3-Q050=\":443\"; ma=2592000,h3-Q046=\":443\"; ma=2592000,h3-Q043=\":443\"; ma=2592000,quic=\":443\"; ma=2592000; v=\"46,43\"","accept-ranges":"none","transfer-encoding":"chunked"}
[debug] [2021-04-19T08:51:59.605Z] >>> HTTP REQUEST GET https://runtimeconfig.googleapis.com/v1beta1/projects/subbme-dev/configs/payjp/variables  
 
[debug] [2021-04-19T08:51:59.980Z] <<< HTTP RESPONSE 200 {"content-type":"application/json; charset=UTF-8","vary":"X-Origin, Referer, Origin,Accept-Encoding","date":"Mon, 19 Apr 2021 08:51:59 GMT","server":"ESF","cache-control":"private","x-xss-protection":"0","x-frame-options":"SAMEORIGIN","x-content-type-options":"nosniff","alt-svc":"h3-29=\":443\"; ma=2592000,h3-T051=\":443\"; ma=2592000,h3-Q050=\":443\"; ma=2592000,h3-Q046=\":443\"; ma=2592000,h3-Q043=\":443\"; ma=2592000,quic=\":443\"; ma=2592000; v=\"46,43\"","accept-ranges":"none","transfer-encoding":"chunked"}
[debug] [2021-04-19T08:51:59.981Z] >>> HTTP REQUEST GET https://runtimeconfig.googleapis.com/v1beta1/projects/subbme-dev/configs/payjp/variables/sk  
 
[debug] [2021-04-19T08:52:00.360Z] <<< HTTP RESPONSE 200 {"content-type":"application/json; charset=UTF-8","vary":"X-Origin, Referer, Origin,Accept-Encoding","date":"Mon, 19 Apr 2021 08:52:00 GMT","server":"ESF","cache-control":"private","x-xss-protection":"0","x-frame-options":"SAMEORIGIN","x-content-type-options":"nosniff","alt-svc":"h3-29=\":443\"; ma=2592000,h3-T051=\":443\"; ma=2592000,h3-Q050=\":443\"; ma=2592000,h3-Q046=\":443\"; ma=2592000,h3-Q043=\":443\"; ma=2592000,quic=\":443\"; ma=2592000; v=\"46,43\"","accept-ranges":"none","transfer-encoding":"chunked"}
[info] i  functions: packaged functions (182.22 KB) for uploading 
[debug] [2021-04-19T08:52:00.882Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "watch": "tsc -w",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "14"
  },
  "main": "lib/index.js",
  "dependencies": {
    "firebase-admin": "^9.2.0",
    "firebase-functions": "^3.11.0",
    "next": "^10.1.3",
    "payjp": "^2.0.7"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^3.9.1",
    "@typescript-eslint/parser": "^3.8.0",
    "eslint": "^7.6.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.22.0",
    "firebase-functions-test": "^0.2.0",
    "typescript": "4.0"
  },
  "private": true
}
[debug] [2021-04-19T08:52:00.883Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/projects/subbme-dev/locations/-/functions  
 
[debug] [2021-04-19T08:52:01.648Z] <<< HTTP RESPONSE 200 {"content-type":"application/json; charset=UTF-8","vary":"X-Origin, Referer, Origin,Accept-Encoding","date":"Mon, 19 Apr 2021 08:52:01 GMT","server":"ESF","cache-control":"private","x-xss-protection":"0","x-frame-options":"SAMEORIGIN","x-content-type-options":"nosniff","alt-svc":"h3-29=\":443\"; ma=2592000,h3-T051=\":443\"; ma=2592000,h3-Q050=\":443\"; ma=2592000,h3-Q046=\":443\"; ma=2592000,h3-Q043=\":443\"; ma=2592000,quic=\":443\"; ma=2592000; v=\"46,43\"","accept-ranges":"none","transfer-encoding":"chunked"}
[debug] [2021-04-19T08:52:01.649Z] [functions] found 1 new HTTP functions, testing setIamPolicy permission...
[debug] [2021-04-19T08:52:01.649Z] >>> HTTP REQUEST POST https://cloudresourcemanager.googleapis.com/v1/projects/subbme-dev:testIamPermissions  
 {"permissions":["cloudfunctions.functions.setIamPolicy"]}
[debug] [2021-04-19T08:52:02.363Z] <<< HTTP RESPONSE 200 {"content-type":"application/json; charset=UTF-8","vary":"X-Origin, Referer, Origin,Accept-Encoding","date":"Mon, 19 Apr 2021 08:52:02 GMT","server":"ESF","cache-control":"private","x-xss-protection":"0","x-frame-options":"SAMEORIGIN","x-content-type-options":"nosniff","server-timing":"gfet4t7; dur=586","alt-svc":"h3-29=\":443\"; ma=2592000,h3-T051=\":443\"; ma=2592000,h3-Q050=\":443\"; ma=2592000,h3-Q046=\":443\"; ma=2592000,h3-Q043=\":443\"; ma=2592000,quic=\":443\"; ma=2592000; v=\"46,43\"","accept-ranges":"none","transfer-encoding":"chunked"}
[debug] [2021-04-19T08:52:02.363Z] [functions] found setIamPolicy permission, proceeding with deploy
[debug] [2021-04-19T08:52:02.364Z] >>> HTTP REQUEST POST https://cloudfunctions.googleapis.com/v1/projects/subbme-dev/locations/us-central1/functions:generateUploadUrl  
 
[debug] [2021-04-19T08:52:03.026Z] <<< HTTP RESPONSE 200 {"content-type":"application/json; charset=UTF-8","vary":"X-Origin, Referer, Origin,Accept-Encoding","date":"Mon, 19 Apr 2021 08:52:03 GMT","server":"ESF","cache-control":"private","x-xss-protection":"0","x-frame-options":"SAMEORIGIN","x-content-type-options":"nosniff","alt-svc":"h3-29=\":443\"; ma=2592000,h3-T051=\":443\"; ma=2592000,h3-Q050=\":443\"; ma=2592000,h3-Q046=\":443\"; ma=2592000,h3-Q043=\":443\"; ma=2592000,quic=\":443\"; ma=2592000; v=\"46,43\"","accept-ranges":"none","transfer-encoding":"chunked"}
[debug] [2021-04-19T08:52:03.027Z] >>> HTTP REQUEST PUT https://storage.googleapis.com/gcf-upload-us-central1-ea484b6a-d79e-4fe9-aafa-7a99ba43471b/d535f4d8-56a5-4083-baf7-6f94f5d684ec.zip?GoogleAccessId=service-729779483858@gcf-admin-robot.iam.gserviceaccount.com&Expires=1618824122&Signature=RJ9Ntc848UPoRcY9toAoZ0V1vcS%2B90Tj%2BxZDWGZV2N0CyRwoWBOrQVBSGTiSikPYVbJLfDY4MCLJZUt8IdMEbYlmzdRhQ%2BH7%2F3mLxFqI8nH0882wCmtiZP402VZMAi%2Fols%2F%2FxNj%2Bu5mtvPcbgAEHap507QPRPZ08jAndNC08lUnD6%2Fwhc4S2Kf1TXtNSWcAa6SUWaQ8zEoDZwb%2BVCDEM4Q%2BuNfutrearGf6yq75jqMXo9NawmNCjNW4ziIlM%2FBF0hEYkCmXH7aaNR9RVdMg76SOe3dCkFSUwAFkCJCxG8fX1eIks2ng0ulcEiRh6dypmP04DzkHuAQoKfs50V7iZPQ%3D%3D  
 <request body omitted>
[debug] [2021-04-19T08:52:03.381Z] <<< HTTP RESPONSE 200 {"x-guploader-uploadid":"ABg5-Uzcer4sfpAkJla8hlTgQECgEPnAPGU_tokxm-3Jl4kZFX0APkXG4uiedJ3uo0dsBaWmfOsgMz7VcRN_7fpszA","etag":"\"a4a916e53a05be646821197f03529056\"","x-goog-generation":"1618822323385448","x-goog-metageneration":"1","x-goog-hash":"crc32c=nCf8wQ==, md5=pKkW5ToFvmRoIRl/A1KQVg==","x-goog-stored-content-length":"186592","x-goog-stored-content-encoding":"identity","vary":"Origin","content-length":"0","date":"Mon, 19 Apr 2021 08:52:03 GMT","server":"UploadServer","content-type":"text/html; charset=UTF-8","alt-svc":"h3-29=\":443\"; ma=2592000,h3-T051=\":443\"; ma=2592000,h3-Q050=\":443\"; ma=2592000,h3-Q046=\":443\"; ma=2592000,h3-Q043=\":443\"; ma=2592000,quic=\":443\"; ma=2592000; v=\"46,43\""}
[info] ✔  functions: functions folder uploaded successfully 
[info] 
The following functions are found in your project but do not exist in your local source code:
	nextAppWeb-nextAppWeb(us-central1)

If you are renaming a function or changing its region, it is recommended that you create the new function first before deleting the old one to prevent event loss. For more info, visit https://firebase.google.com/docs/functions/manage-functions#modify

